{% assign saf_to_render = include.saf %}


{% if saf_to_render.tags != null %}
<div class="tag-list-inline saf-tags-inline">
  <span class="taghead">Tags:</span>
 {% for tag in saf_to_render.tags %}
  {% assign tag_url = "tags/" | append: tag %}
  <span class="tag"><a href="{{ tag_url | relative_url }}">{{ tag }}</a></span>
 {% endfor %}
</div>
{% endif %}


{% if saf_to_render.requirement != null %}
  <div>
  <h2>Requirement</h2>
  {{ saf_to_render.requirement | markdownify }}
  </div>
{% endif %}



{% if content != requirement %}
  <div>
  {{ content }}
  </div>
{% endif %}

{% if saf_to_render.more_info != null %}
  <div>
  <h2>More information</h2>
  {{ saf_to_render.more_info | markdownify }}
  </div>
{% endif %}

{% if saf_to_render.assessment_guidance != null %}
  <div>
  <h2>Assessment Guidance</h2>
  {{ saf_to_render.assessment_guidance | markdownify }}
  </div>
{% endif %}


{% if saf_to_render.assessment_examples != null %}
  <div>
    <h2>Assessment Examples (Scoring 0–5)</h2>
    {% assign scores = "0,1,2,3,4,5" | split: "," %}
    {% assign score_labels = "No evidence|Limited requirements met|Some requirements met|Much requirements met|Most requirement met|All requirement met" | split: "|" %}
    <dl class="assessment-examples">
      {% for score in scores %}
        {% assign example = saf_to_render.assessment_examples[score] %}
        {% if example %}
          <dt><h3>{{ score }} – {{ score_labels[forloop.index0] }}</h3></dt>
          <dd>
            {% if example.first and example.first.example %}
              <ul>
                {% for item in example %}
                  <li>{{ item.example | markdownify | strip }}</li>
                {% endfor %}
              </ul>
            {% else %}
              {{ example | markdownify }}
            {% endif %}
          </dd>
        {% endif %}
      {% endfor %}
    </dl>
  </div>
{% endif %}



{% if saf_to_render.examples != null %}
  <div>
  <h2>Examples</h2>
  {% for example in saf_to_render.examples %}
    <div>
      <h3>{{ example.title }}</h3>
      {{ example.content | markdownify }}
    </div>
  {% endfor %}
  </div>
{% endif %}

{% if saf_to_render.technology != null %}
  <div>
  <h2>Technology</h2>
  {% for technology in saf_to_render.technology %}
    <div>
      <h3>{{ technology.title }}</h3>
      {{ technology.content | markdownify }}
    </div>
  {% endfor %}
  </div>
{% endif %}

{% if saf_to_render.further_reading != null %}
  <div>
  <h2>Further Reading</h2>
  {% for reading in saf_to_render.further_reading %}
    <div>
      <h3>
        {% if reading.url %}
          <a href="{{reading.url | relative_url}}">
        {% endif %}
            {{ reading.title }} 
        {% if reading.url %}
          </a>
        {% endif %}
        </h3>
      {{ reading.content | markdownify }}
    </div>
  {% endfor %}
  </div>
{% endif %}

{% assign content =  saf_to_render.content  %}
{% assign requirement = saf_to_render.requirement | markdownify %}

