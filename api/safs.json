---
---

{%- assign pages = site.safs | where_exp: "p", "p.layout != nil" -%}

{
"version": v{{ site.data.changelog.changelog.version}},
"version_date": {{ site.data.changelog.changelog.date}},
"safs":
  [
    {%- for p in pages %}
      {
      "title": {{ p.title | markdownify | strip_newlines | jsonify  }},
      "url": {{ p.url | relative_url | strip_newlines |  jsonify  }},
      "description": {{ p.description | markdownify|strip_newlines |  jsonify  }},
      "dimension": {{ p.dimension | markdownify| strip_newlines | jsonify  }},
      "requirement": {{ p.requirement | markdownify | strip_newlines | jsonify  }},
      "content": {{ p.content | markdownify | strip_html | strip_newlines |jsonify  }}
      }
      {%- unless forloop.last %},{% endunless -%}
    {% endfor %}
  ]
}